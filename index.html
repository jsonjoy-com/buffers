<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@jsonjoy.com/buffers</title><meta name="description" content="Documentation for @jsonjoy.com/buffers"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@jsonjoy.com/buffers</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@jsonjoy.com/buffers</h2></div><div class="tsd-panel tsd-typography"><a id="md:buffers" class="tsd-anchor"></a><h1><a href="#md:buffers">buffers</a></h1><p>Various helper utilities for working with buffers and binary data in TypeScript.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@jsonjoy.com/buffers</span>
</code><button>Copy</button></pre>
<a id="md:features" class="tsd-anchor"></a><h2><a href="#md:features">Features</a></h2><p>This package provides high-performance utilities for working with binary data, buffers, and UTF-8 text encoding/decoding. It includes optimized implementations for both Node.js and browser environments.</p>
<a id="md:core-classes" class="tsd-anchor"></a><h2><a href="#md:core-classes">Core Classes</a></h2><a id="md:writer" class="tsd-anchor"></a><h3><a href="#md:writer">Writer</a></h3><p>A growable binary data writer with automatic buffer expansion.</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">Writer</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/Writer&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">writer</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Writer</span><span class="hl-1">();</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">u8</span><span class="hl-1">(</span><span class="hl-7">0x42</span><span class="hl-1">);          </span><span class="hl-8">// Write unsigned 8-bit integer</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">u16</span><span class="hl-1">(</span><span class="hl-7">0x1234</span><span class="hl-1">);       </span><span class="hl-8">// Write unsigned 16-bit integer</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">u32</span><span class="hl-1">(</span><span class="hl-7">0x12345678</span><span class="hl-1">);   </span><span class="hl-8">// Write unsigned 32-bit integer</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">u64</span><span class="hl-1">(</span><span class="hl-7">0x123456789abcdef</span><span class="hl-5">n</span><span class="hl-1">); </span><span class="hl-8">// Write unsigned 64-bit integer</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">f32</span><span class="hl-1">(</span><span class="hl-7">3.14</span><span class="hl-1">);         </span><span class="hl-8">// Write 32-bit float</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">f64</span><span class="hl-1">(</span><span class="hl-7">3.141592653589793</span><span class="hl-1">); </span><span class="hl-8">// Write 64-bit float</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">utf8</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello üåç&#39;</span><span class="hl-1">);  </span><span class="hl-8">// Write UTF-8 string</span><br/><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">ascii</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello&#39;</span><span class="hl-1">);    </span><span class="hl-8">// Write ASCII string</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1"> = </span><span class="hl-4">writer</span><span class="hl-1">.</span><span class="hl-0">flush</span><span class="hl-1">(); </span><span class="hl-8">// Get written data as Uint8Array</span>
</code><button>Copy</button></pre>
<a id="md:reader" class="tsd-anchor"></a><h3><a href="#md:reader">Reader</a></h3><p>A binary data reader for parsing binary buffers.</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">Reader</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/Reader&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">reader</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Reader</span><span class="hl-1">();</span><br/><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">reset</span><span class="hl-1">(</span><span class="hl-4">someUint8Array</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">byte</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">u8</span><span class="hl-1">();     </span><span class="hl-8">// Read unsigned 8-bit integer</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">word</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">u16</span><span class="hl-1">();    </span><span class="hl-8">// Read unsigned 16-bit integer</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">dword</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">u32</span><span class="hl-1">();   </span><span class="hl-8">// Read unsigned 32-bit integer</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">qword</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">u64</span><span class="hl-1">();   </span><span class="hl-8">// Read unsigned 64-bit integer</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">float</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">f32</span><span class="hl-1">();   </span><span class="hl-8">// Read 32-bit float</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">double</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">f64</span><span class="hl-1">();  </span><span class="hl-8">// Read 64-bit float</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">text</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">utf8</span><span class="hl-1">(</span><span class="hl-7">5</span><span class="hl-1">);  </span><span class="hl-8">// Read UTF-8 string of 5 bytes</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ascii</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">ascii</span><span class="hl-1">(</span><span class="hl-7">5</span><span class="hl-1">); </span><span class="hl-8">// Read ASCII string of 5 characters</span>
</code><button>Copy</button></pre>
<a id="md:streamingreader" class="tsd-anchor"></a><h3><a href="#md:streamingreader">StreamingReader</a></h3><p>A streaming binary reader that can handle data arriving in chunks.</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">StreamingReader</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/StreamingReader&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">reader</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">StreamingReader</span><span class="hl-1">();</span><br/><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-4">chunk1</span><span class="hl-1">);</span><br/><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-4">chunk2</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Read data as it becomes available</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">u32</span><span class="hl-1">();</span><br/><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">consume</span><span class="hl-1">(); </span><span class="hl-8">// Mark consumed data for cleanup</span>
</code><button>Copy</button></pre>
<a id="md:streamingoctetreader" class="tsd-anchor"></a><h3><a href="#md:streamingoctetreader">StreamingOctetReader</a></h3><p>A specialized streaming reader for byte-oriented protocols with optional XOR masking.</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">StreamingOctetReader</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/StreamingOctetReader&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">reader</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">StreamingOctetReader</span><span class="hl-1">();</span><br/><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-4">dataChunk</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">byte</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">u8</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">masked</span><span class="hl-1"> = </span><span class="hl-4">reader</span><span class="hl-1">.</span><span class="hl-0">bufXor</span><span class="hl-1">(</span><span class="hl-4">length</span><span class="hl-1">, [</span><span class="hl-7">0x12</span><span class="hl-1">, </span><span class="hl-7">0x34</span><span class="hl-1">, </span><span class="hl-7">0x56</span><span class="hl-1">, </span><span class="hl-7">0x78</span><span class="hl-1">], </span><span class="hl-7">0</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:utility-functions" class="tsd-anchor"></a><h2><a href="#md:utility-functions">Utility Functions</a></h2><a id="md:buffer-operations" class="tsd-anchor"></a><h3><a href="#md:buffer-operations">Buffer Operations</a></h3><pre><code class="language-typescript"><span class="hl-8">// Array creation and manipulation</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">b</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/b&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">concat</span><span class="hl-1">, </span><span class="hl-4">concatList</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/concat&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">copy</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/copy&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">buffer</span><span class="hl-1"> = </span><span class="hl-0">b</span><span class="hl-1">(</span><span class="hl-7">0x48</span><span class="hl-1">, </span><span class="hl-7">0x65</span><span class="hl-1">, </span><span class="hl-7">0x6c</span><span class="hl-1">, </span><span class="hl-7">0x6c</span><span class="hl-1">, </span><span class="hl-7">0x6f</span><span class="hl-1">); </span><span class="hl-8">// Create from bytes</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">combined</span><span class="hl-1"> = </span><span class="hl-0">concat</span><span class="hl-1">(</span><span class="hl-4">buffer1</span><span class="hl-1">, </span><span class="hl-4">buffer2</span><span class="hl-1">);         </span><span class="hl-8">// Concatenate two buffers</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">list</span><span class="hl-1"> = </span><span class="hl-0">concatList</span><span class="hl-1">([</span><span class="hl-4">buf1</span><span class="hl-1">, </span><span class="hl-4">buf2</span><span class="hl-1">, </span><span class="hl-4">buf3</span><span class="hl-1">]);      </span><span class="hl-8">// Concatenate array of buffers</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">duplicate</span><span class="hl-1"> = </span><span class="hl-0">copy</span><span class="hl-1">(</span><span class="hl-4">originalBuffer</span><span class="hl-1">);           </span><span class="hl-8">// Copy buffer</span>
</code><button>Copy</button></pre>
<a id="md:comparison-functions" class="tsd-anchor"></a><h3><a href="#md:comparison-functions">Comparison Functions</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">cmpUint8Array</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/cmpUint8Array&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">cmpUint8Array2</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/cmpUint8Array2&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">cmpUint8Array3</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/cmpUint8Array3&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">isEqual</span><span class="hl-1"> = </span><span class="hl-0">cmpUint8Array</span><span class="hl-1">(</span><span class="hl-4">buf1</span><span class="hl-1">, </span><span class="hl-4">buf2</span><span class="hl-1">);        </span><span class="hl-8">// Returns boolean</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">comparison</span><span class="hl-1"> = </span><span class="hl-0">cmpUint8Array2</span><span class="hl-1">(</span><span class="hl-4">buf1</span><span class="hl-1">, </span><span class="hl-4">buf2</span><span class="hl-1">);    </span><span class="hl-8">// Returns -1, 0, or 1 (byte-first)</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">comparison2</span><span class="hl-1"> = </span><span class="hl-0">cmpUint8Array3</span><span class="hl-1">(</span><span class="hl-4">buf1</span><span class="hl-1">, </span><span class="hl-4">buf2</span><span class="hl-1">);   </span><span class="hl-8">// Returns -1, 0, or 1 (length-first)</span>
</code><button>Copy</button></pre>
<a id="md:type-checking" class="tsd-anchor"></a><h3><a href="#md:type-checking">Type Checking</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">isUint8Array</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/isUint8Array&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">isArrayBuffer</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/isArrayBuffer&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">isFloat32</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/isFloat32&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">isUint8Array</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">)) { </span><span class="hl-8">/* data is Uint8Array or Buffer */</span><span class="hl-1"> }</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">isArrayBuffer</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">)) { </span><span class="hl-8">/* data is ArrayBuffer */</span><span class="hl-1"> }</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">isFloat32</span><span class="hl-1">(</span><span class="hl-7">3.14</span><span class="hl-1">)) { </span><span class="hl-8">/* number can fit in float32 */</span><span class="hl-1"> }</span>
</code><button>Copy</button></pre>
<a id="md:conversion-functions" class="tsd-anchor"></a><h3><a href="#md:conversion-functions">Conversion Functions</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">toUint8Array</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/toUint8Array&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">bufferToUint8Array</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/bufferToUint8Array&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">toBuf</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/toBuf&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">uint8</span><span class="hl-1"> = </span><span class="hl-0">toUint8Array</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">);           </span><span class="hl-8">// Convert various types to Uint8Array</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">converted</span><span class="hl-1"> = </span><span class="hl-0">bufferToUint8Array</span><span class="hl-1">(</span><span class="hl-4">buf</span><span class="hl-1">);  </span><span class="hl-8">// Convert Buffer to Uint8Array</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">encoded</span><span class="hl-1"> = </span><span class="hl-0">toBuf</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello üåç&#39;</span><span class="hl-1">);          </span><span class="hl-8">// Convert string to UTF-8 bytes</span>
</code><button>Copy</button></pre>
<a id="md:string-utilities" class="tsd-anchor"></a><h3><a href="#md:string-utilities">String Utilities</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">ascii</span><span class="hl-1">, </span><span class="hl-4">utf8</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/strings&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">asciiBytes</span><span class="hl-1"> = </span><span class="hl-0">ascii</span><span class="hl-2">`Hello World`</span><span class="hl-1">;      </span><span class="hl-8">// ASCII string to bytes</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">utf8Bytes</span><span class="hl-1"> = </span><span class="hl-0">utf8</span><span class="hl-2">`Hello üåç`</span><span class="hl-1">;           </span><span class="hl-8">// UTF-8 string to bytes</span>
</code><button>Copy</button></pre>
<a id="md:utf-8-encodingdecoding" class="tsd-anchor"></a><h2><a href="#md:utf-8-encodingdecoding">UTF-8 Encoding/Decoding</a></h2><a id="md:high-performance-utf-8-decoding" class="tsd-anchor"></a><h3><a href="#md:high-performance-utf-8-decoding">High-Performance UTF-8 Decoding</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">decodeUtf8</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/utf8/decodeUtf8&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">text</span><span class="hl-1"> = </span><span class="hl-0">decodeUtf8</span><span class="hl-1">(</span><span class="hl-4">uint8Array</span><span class="hl-1">, </span><span class="hl-4">offset</span><span class="hl-1">, </span><span class="hl-4">length</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>The package includes multiple optimized UTF-8 decoding implementations that automatically choose the best strategy based on:</p>
<ul>
<li>Environment (Node.js vs Browser)</li>
<li>String length</li>
<li>Available APIs</li>
</ul>
<a id="md:utf-8-encoding" class="tsd-anchor"></a><h3><a href="#md:utf-8-encoding">UTF-8 Encoding</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">encode</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/utf8/encode&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">bytesWritten</span><span class="hl-1"> = </span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-4">targetArray</span><span class="hl-1">, </span><span class="hl-2">&#39;Hello üåç&#39;</span><span class="hl-1">, </span><span class="hl-4">offset</span><span class="hl-1">, </span><span class="hl-4">maxLength</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:advanced-utf-8-features" class="tsd-anchor"></a><h3><a href="#md:advanced-utf-8-features">Advanced UTF-8 Features</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">CachedUtf8Decoder</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/utf8/CachedUtf8Decoder&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">isUtf8</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/utf8/isUtf8&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">decodeAscii</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/utf8/decodeAscii&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">decoder</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CachedUtf8Decoder</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">text</span><span class="hl-1"> = </span><span class="hl-4">decoder</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-4">uint8Array</span><span class="hl-1">, </span><span class="hl-4">start</span><span class="hl-1">, </span><span class="hl-4">length</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">isValidUtf8</span><span class="hl-1"> = </span><span class="hl-0">isUtf8</span><span class="hl-1">(</span><span class="hl-4">uint8Array</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">asciiText</span><span class="hl-1"> = </span><span class="hl-0">decodeAscii</span><span class="hl-1">(</span><span class="hl-4">uint8Array</span><span class="hl-1">, </span><span class="hl-4">start</span><span class="hl-1">, </span><span class="hl-4">length</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:special-data-types" class="tsd-anchor"></a><h2><a href="#md:special-data-types">Special Data Types</a></h2><a id="md:slice" class="tsd-anchor"></a><h3><a href="#md:slice">Slice</a></h3><p>A lightweight view into a buffer without copying data.</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">Slice</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/Slice&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">slice</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Slice</span><span class="hl-1">(</span><span class="hl-4">uint8Array</span><span class="hl-1">, </span><span class="hl-4">dataView</span><span class="hl-1">, </span><span class="hl-4">start</span><span class="hl-1">, </span><span class="hl-4">end</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">subarray</span><span class="hl-1"> = </span><span class="hl-4">slice</span><span class="hl-1">.</span><span class="hl-0">subarray</span><span class="hl-1">(); </span><span class="hl-8">// Get the actual data</span>
</code><button>Copy</button></pre>
<a id="md:float16-support" class="tsd-anchor"></a><h3><a href="#md:float16-support">Float16 Support</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">decodeF16</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/f16&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">float32Value</span><span class="hl-1"> = </span><span class="hl-0">decodeF16</span><span class="hl-1">(</span><span class="hl-4">binaryF16Value</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:debugging-utilities" class="tsd-anchor"></a><h2><a href="#md:debugging-utilities">Debugging Utilities</a></h2><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><span class="hl-4">printOctets</span><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@jsonjoy.com/buffers/lib/printOctets&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-0">printOctets</span><span class="hl-1">(</span><span class="hl-4">uint8Array</span><span class="hl-1">, </span><span class="hl-7">16</span><span class="hl-1">)); </span><span class="hl-8">// Print hex dump of first 16 bytes</span>
</code><button>Copy</button></pre>
<a id="md:performance" class="tsd-anchor"></a><h2><a href="#md:performance">Performance</a></h2><p>This library is designed for high performance with:</p>
<ul>
<li><strong>Optimized UTF-8 handling</strong>: Multiple implementations that choose the fastest method for each environment</li>
<li><strong>Minimal allocations</strong>: Reusable readers and writers with buffer pooling</li>
<li><strong>Zero-copy operations</strong>: Slices and views avoid unnecessary data copying</li>
<li><strong>Environment-specific optimizations</strong>: Leverages Node.js Buffer APIs when available</li>
</ul>
<a id="md:browser-support" class="tsd-anchor"></a><h2><a href="#md:browser-support">Browser Support</a></h2><p>Works in all modern browsers and Node.js environments. The library automatically detects available APIs and chooses the most appropriate implementation.</p>
<a id="md:typescript-support" class="tsd-anchor"></a><h2><a href="#md:typescript-support">TypeScript Support</a></h2><p>Full TypeScript support with comprehensive type definitions included.</p>
<a id="md:license" class="tsd-anchor"></a><h2><a href="#md:license">License</a></h2><p>Apache-2.0</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:buffers"><span>buffers</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:features"><span>Features</span></a></li><li><a href="#md:core-classes"><span>Core <wbr/>Classes</span></a></li><li><ul><li><a href="#md:writer"><span>Writer</span></a></li><li><a href="#md:reader"><span>Reader</span></a></li><li><a href="#md:streamingreader"><span>Streaming<wbr/>Reader</span></a></li><li><a href="#md:streamingoctetreader"><span>Streaming<wbr/>Octet<wbr/>Reader</span></a></li></ul></li><li><a href="#md:utility-functions"><span>Utility <wbr/>Functions</span></a></li><li><ul><li><a href="#md:buffer-operations"><span>Buffer <wbr/>Operations</span></a></li><li><a href="#md:comparison-functions"><span>Comparison <wbr/>Functions</span></a></li><li><a href="#md:type-checking"><span>Type <wbr/>Checking</span></a></li><li><a href="#md:conversion-functions"><span>Conversion <wbr/>Functions</span></a></li><li><a href="#md:string-utilities"><span>String <wbr/>Utilities</span></a></li></ul></li><li><a href="#md:utf-8-encodingdecoding"><span>UTF-<wbr/>8 <wbr/>Encoding/<wbr/>Decoding</span></a></li><li><ul><li><a href="#md:high-performance-utf-8-decoding"><span>High-<wbr/>Performance UTF-<wbr/>8 <wbr/>Decoding</span></a></li><li><a href="#md:utf-8-encoding"><span>UTF-<wbr/>8 <wbr/>Encoding</span></a></li><li><a href="#md:advanced-utf-8-features"><span>Advanced UTF-<wbr/>8 <wbr/>Features</span></a></li></ul></li><li><a href="#md:special-data-types"><span>Special <wbr/>Data <wbr/>Types</span></a></li><li><ul><li><a href="#md:slice"><span>Slice</span></a></li><li><a href="#md:float16-support"><span>Float16 <wbr/>Support</span></a></li></ul></li><li><a href="#md:debugging-utilities"><span>Debugging <wbr/>Utilities</span></a></li><li><a href="#md:performance"><span>Performance</span></a></li><li><a href="#md:browser-support"><span>Browser <wbr/>Support</span></a></li><li><a href="#md:typescript-support"><span>Type<wbr/>Script <wbr/>Support</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@jsonjoy.com/buffers</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>